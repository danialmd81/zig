import CodeBlock from "@theme/CodeBlock";

import PayloadCapturesOptionalIf from "!!raw-loader!./25.payload-captures-optional-if.zig";
import PayloadCapturesErrorUnionIf from "!!raw-loader!./25.payload-captures-error-union-if.zig";
import PayloadCapturesWhileOptional from "!!raw-loader!./25.payload-captures-while-optional.zig";
import PayloadCapturesWhileErrorUnion from "!!raw-loader!./25.payload-captures-while-error-union.zig";
import PayloadCapturesForCapture from "!!raw-loader!./25.payload-captures-for-capture.zig";
import PayloadCapturesSwitchCapture from "!!raw-loader!./25.payload-captures-switch-capture.zig";
import PayloadCapturesForPointerCapture from "!!raw-loader!./25.payload-captures-for-pointer-capture.zig";

# Payload Captures

Payload captures use the syntax `|value|` and appear in many places, some of
which we've seen already. Wherever they appear, they are used to "capture" the
value from something.

With if statements and optionals.

<CodeBlock language="zig">{PayloadCapturesOptionalIf}</CodeBlock>

With if statements and error unions. The else with the error capture is required
here.

<CodeBlock language="zig">{PayloadCapturesErrorUnionIf}</CodeBlock>

With while loops and optionals. This may have an else block.

<CodeBlock language="zig">{PayloadCapturesWhileOptional}</CodeBlock>

With while loops and error unions. The else with the error capture is required
here.

<CodeBlock language="zig">{PayloadCapturesWhileErrorUnion}</CodeBlock>

For loops.

<CodeBlock language="zig">{PayloadCapturesForCapture}</CodeBlock>

Switch cases on tagged unions.

<CodeBlock language="zig">{PayloadCapturesSwitchCapture}</CodeBlock>

As we saw in the Union and Optional sections above, values captured with the
`|val|` syntax are immutable (similar to function arguments), but we can use
pointer capture to modify the original values. This captures the values as
pointers that are themselves still immutable, but because the value is now a
pointer, we can modify the original value by dereferencing it:

<CodeBlock language="zig">{PayloadCapturesForPointerCapture}</CodeBlock>
